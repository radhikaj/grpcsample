make -C enc
make[1]: Entering directory '/home/azureuser/openenclave-install/share/openenclave/samples/hello-world-grpc/enc'
make build
make[2]: Entering directory '/home/azureuser/openenclave-install/share/openenclave/samples/hello-world-grpc/enc'
Compilers used: clang-7, clang++-7
oeedger8r ../helloworld.edl --trusted
Generating edge routines for the Open Enclave SDK.
Success.
/usr/local/bin/protoc -I. helloworld.proto --cpp_out=.
/usr/local/bin/protoc --grpc_out=. --plugin=protoc-gen-grpc=`which grpc_cpp_plugin`  helloworld.proto
clang++-7 -c -nostdinc -m64 -fPIC -mllvm -x86-speculative-load-hardening -I/home/azureuser/openenclave-install3/include/openenclave/3rdparty/libcxx -I/home/azureuser/openenclave-install3/include/openenclave/3rdparty/libc -I/home/azureuser/openenclave-install3/include/openenclave/3rdparty -I/home/azureuser/openenclave-install3/include -g -std=c++11 enc.cpp -fPIC -I/usr/local/protobufenclave/include -I/home/azureuser/grpcinstall/include -nostdinc++ #-I /usr/local/include
clang-7 -c -nostdinc -m64 -fPIC -mllvm -x86-speculative-load-hardening -I/home/azureuser/openenclave-install3/include/openenclave/3rdparty/libc -I/home/azureuser/openenclave-install3/include/openenclave/3rdparty -I/home/azureuser/openenclave-install3/include  -g helloworld_t.c -o helloworld_t.o 
clang++-7 -c -nostdinc -m64 -fPIC -mllvm -x86-speculative-load-hardening -I/home/azureuser/openenclave-install3/include/openenclave/3rdparty/libcxx -I/home/azureuser/openenclave-install3/include/openenclave/3rdparty/libc -I/home/azureuser/openenclave-install3/include/openenclave/3rdparty -I/home/azureuser/openenclave-install3/include -g -std=c++11 helloworld.pb.cc helloworld.grpc.pb.cc -I/usr/local/protobufenclave/include/ -I/home/azureuser/grpcinstall/include -fPIC -I/usr/local/protobufenclave/include
clang++-7 -o helloworldenc.so enc.o helloworld_t.o helloworld.pb.o helloworld.grpc.pb.o -L/usr/local/protobufenclave/lib ~/grpc/libs/opt/libgrpc_unsecure.a ~/grpc/libs/opt/libgrpc++_unsecure.a /usr/local/protobufenclave/lib/libprotobuf.a ~/grpc/libs/opt/libgrpc_unsecure.a ~/grpc/libs/opt/libgrpc++_unsecure.a ~/grpc/libs/opt/libz.a -loesocket_enc -L/home/azureuser/openenclave-install3/lib/openenclave/enclave -nostdlib -nodefaultlibs -nostartfiles -Wl,--no-undefined -Wl,-Bstatic -Wl,-Bsymbolic -Wl,--export-dynamic -Wl,-pie -Wl,--build-id -loeenclave -lmbedx509 -lmbedcrypto -loelibcxx -loelibc -loecore
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(ev_posix.o):(.data+0x0): undefined reference to `poll'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(ev_epollex_linux.o): In function `pollable_create(pollable_type, pollable**)':
/home/azureuser/grpc/src/core/lib/iomgr/ev_epollex_linux.cc:555: undefined reference to `epoll_create1'
/home/azureuser/grpc/src/core/lib/iomgr/ev_epollex_linux.cc:574: undefined reference to `epoll_ctl'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(ev_epollex_linux.o): In function `pollable_epoll(pollable*, long)':
/home/azureuser/grpc/src/core/lib/iomgr/ev_epollex_linux.cc:1005: undefined reference to `epoll_wait'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(ev_epollex_linux.o): In function `pollable_add_fd(pollable*, grpc_fd*)':
/home/azureuser/grpc/src/core/lib/iomgr/ev_epollex_linux.cc:688: undefined reference to `epoll_ctl'
/home/azureuser/grpc/libs/opt/libgrpc++_unsecure.a(sync_posix.o): In function `gpr_cv_init':
/home/azureuser/grpc/src/core/lib/gpr/sync_posix.cc:86: undefined reference to `pthread_condattr_setclock'
/usr/local/protobufenclave/lib/libprotobuf.a(zero_copy_stream_impl.o): In function `google::protobuf::io::FileInputStream::CopyingFileInputStream::Read(void*, int)':
/home/azureuser/protobuf/src/google/protobuf/io/zero_copy_stream_impl.cc:146: undefined reference to `read'
/usr/local/protobufenclave/lib/libprotobuf.a(zero_copy_stream_impl.o): In function `google::protobuf::io::FileInputStream::CopyingFileInputStream::Skip(int)':
/home/azureuser/protobuf/src/google/protobuf/io/zero_copy_stream_impl.cc:161: undefined reference to `lseek'
/usr/local/protobufenclave/lib/libprotobuf.a(zero_copy_stream_impl.o): In function `google::protobuf::io::FileOutputStream::CopyingFileOutputStream::Write(void const*, int)':
/home/azureuser/protobuf/src/google/protobuf/io/zero_copy_stream_impl.cc:249: undefined reference to `write'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(resolve_address_posix.o): In function `posix_blocking_resolve_address(char const*, char const*, grpc_resolved_addresses**)':
/home/azureuser/grpc/src/core/lib/iomgr/resolve_address_posix.cc:111: undefined reference to `gai_strerror'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(tcp_posix.o): In function `tcp_send(int, msghdr const*)':
/home/azureuser/grpc/src/core/lib/iomgr/tcp_posix.cc:566: undefined reference to `sendmsg'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(tcp_posix.o): In function `tcp_do_read((anonymous namespace)::grpc_tcp*)':
/home/azureuser/grpc/src/core/lib/iomgr/tcp_posix.cc:444: undefined reference to `recvmsg'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(tcp_server_utils_posix_ifaddrs.o): In function `grpc_tcp_server_add_all_local_addrs(grpc_tcp_server*, unsigned int, int, int*)':
/home/azureuser/grpc/src/core/lib/iomgr/tcp_server_utils_posix_ifaddrs.cc:110: undefined reference to `getifaddrs'
/home/azureuser/grpc/src/core/lib/iomgr/tcp_server_utils_posix_ifaddrs.cc:171: undefined reference to `freeifaddrs'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(unix_sockets_posix.o): In function `grpc_create_socketpair_if_unix(int*)':
/home/azureuser/grpc/src/core/lib/iomgr/unix_sockets_posix.cc:39: undefined reference to `socketpair'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(unix_sockets_posix.o): In function `grpc_unlink_if_unix_domain_socket(grpc_resolved_address const*)':
/home/azureuser/grpc/src/core/lib/iomgr/unix_sockets_posix.cc:87: undefined reference to `unlink'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(socket_utils_common_posix.o): In function `grpc_set_socket_nonblocking(int, int)':
/home/azureuser/grpc/src/core/lib/iomgr/socket_utils_common_posix.cc:52: undefined reference to `fcntl'
/home/azureuser/grpc/src/core/lib/iomgr/socket_utils_common_posix.cc:63: undefined reference to `fcntl'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(socket_utils_common_posix.o): In function `grpc_set_socket_cloexec(int, int)':
/home/azureuser/grpc/src/core/lib/iomgr/socket_utils_common_posix.cc:126: undefined reference to `fcntl'
/home/azureuser/grpc/src/core/lib/iomgr/socket_utils_common_posix.cc:137: undefined reference to `fcntl'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(socket_utils_common_posix.o): In function `grpc_inet_pton(int, char const*, void*)':
/home/azureuser/grpc/src/core/lib/iomgr/socket_utils_common_posix.cc:443: undefined reference to `inet_pton'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(socket_utils_common_posix.o): In function `grpc_inet_ntop(int, void const*, char*, unsigned long)':
/home/azureuser/grpc/src/core/lib/iomgr/socket_utils_common_posix.cc:448: undefined reference to `inet_ntop'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(socket_utils_posix.o): In function `grpc_accept4(int, grpc_resolved_address*, int, int)':
/home/azureuser/grpc/src/core/lib/iomgr/socket_utils_posix.cc:41: undefined reference to `fcntl'
/home/azureuser/grpc/src/core/lib/iomgr/socket_utils_posix.cc:43: undefined reference to `fcntl'
/home/azureuser/grpc/src/core/lib/iomgr/socket_utils_posix.cc:46: undefined reference to `fcntl'
/home/azureuser/grpc/src/core/lib/iomgr/socket_utils_posix.cc:48: undefined reference to `fcntl'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(wakeup_fd_eventfd.o): In function `eventfd_create(grpc_wakeup_fd*)':
/home/azureuser/grpc/src/core/lib/iomgr/wakeup_fd_eventfd.cc:35: undefined reference to `eventfd'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(wakeup_fd_eventfd.o): In function `eventfd_consume(grpc_wakeup_fd*)':
/home/azureuser/grpc/src/core/lib/iomgr/wakeup_fd_eventfd.cc:47: undefined reference to `eventfd_read'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(wakeup_fd_eventfd.o): In function `eventfd_wakeup(grpc_wakeup_fd*)':
/home/azureuser/grpc/src/core/lib/iomgr/wakeup_fd_eventfd.cc:59: undefined reference to `eventfd_write'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(wakeup_fd_eventfd.o): In function `eventfd_check_availability()':
/home/azureuser/grpc/src/core/lib/iomgr/wakeup_fd_eventfd.cc:72: undefined reference to `eventfd'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(wakeup_fd_pipe.o): In function `pipe_init(grpc_wakeup_fd*)':
/home/azureuser/grpc/src/core/lib/iomgr/wakeup_fd_pipe.cc:38: undefined reference to `pipe'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(wakeup_fd_pipe.o): In function `pipe_consume(grpc_wakeup_fd*)':
/home/azureuser/grpc/src/core/lib/iomgr/wakeup_fd_pipe.cc:58: undefined reference to `read'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(wakeup_fd_pipe.o): In function `pipe_wakeup(grpc_wakeup_fd*)':
/home/azureuser/grpc/src/core/lib/iomgr/wakeup_fd_pipe.cc:74: undefined reference to `write'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(ares_gethostbyname.o): In function `fake_hostent':
/home/azureuser/grpc/third_party/cares/cares/ares_gethostbyname.c:268: undefined reference to `inet_addr'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(inet_net_pton.o): In function `ares_inet_pton':
/home/azureuser/grpc/third_party/cares/cares/inet_net_pton.c:447: undefined reference to `inet_pton'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(inet_ntop.o): In function `ares_inet_ntop':
/home/azureuser/grpc/third_party/cares/cares/inet_ntop.c:205: undefined reference to `inet_ntop'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(ev_epoll1_linux.o): In function `pollset_global_init()':
/home/azureuser/grpc/src/core/lib/iomgr/ev_epoll1_linux.cc:517: undefined reference to `epoll_ctl'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(ev_epoll1_linux.o): In function `epoll_create_and_cloexec()':
/home/azureuser/grpc/src/core/lib/iomgr/ev_epoll1_linux.cc:94: undefined reference to `epoll_create1'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(ev_epoll1_linux.o): In function `fd_create(int, char const*, bool)':
/home/azureuser/grpc/src/core/lib/iomgr/ev_epoll1_linux.cc:370: undefined reference to `epoll_ctl'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(ev_epoll1_linux.o): In function `do_epoll_wait(grpc_pollset*, long)':
/home/azureuser/grpc/src/core/lib/iomgr/ev_epoll1_linux.cc:717: undefined reference to `epoll_wait'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(ev_poll_posix.o): In function `cvfd_poll(pollfd*, unsigned long, int)':
/home/azureuser/grpc/src/core/lib/iomgr/ev_poll_posix.cc:1620: undefined reference to `poll'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(gethostname_host_name_max.o): In function `grpc_gethostname()':
/home/azureuser/grpc/src/core/lib/iomgr/gethostname_host_name_max.cc:33: undefined reference to `gethostname'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(is_epollexclusive_available.o): In function `grpc_is_epollexclusive_available':
/home/azureuser/grpc/src/core/lib/iomgr/is_epollexclusive_available.cc:40: undefined reference to `epoll_create1'
/home/azureuser/grpc/src/core/lib/iomgr/is_epollexclusive_available.cc:51: undefined reference to `eventfd'
/home/azureuser/grpc/src/core/lib/iomgr/is_epollexclusive_available.cc:70: undefined reference to `epoll_ctl'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(grpc_ares_ev_driver_posix.o): In function `grpc_core::GrpcPolledFdPosix::IsFdStillReadableLocked()':
/home/azureuser/grpc/src/core/ext/filters/client_channel/resolver/dns/c_ares/grpc_ares_ev_driver_posix.cc:71: undefined reference to `ioctl'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(ares__get_hostent.o): In function `ares__get_hostent':
/home/azureuser/grpc/third_party/cares/cares/ares__get_hostent.c:141: undefined reference to `inet_addr'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(ares_init.o): In function `init_by_defaults':
/home/azureuser/grpc/third_party/cares/cares/ares_init.c:1856: undefined reference to `gethostname'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(ares_init.o): In function `ip_addr':
/home/azureuser/grpc/third_party/cares/cares/ares_init.c:2320: undefined reference to `inet_addr'
/home/azureuser/grpc/third_party/cares/cares/ares_init.c:2320: undefined reference to `inet_addr'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(ares_process.o): In function `socket_writev':
/home/azureuser/grpc/third_party/cares/cares/ares_process.c:186: undefined reference to `writev'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(ares_process.o): In function `socket_recvfrom':
/home/azureuser/grpc/third_party/cares/cares/ares_process.c:339: undefined reference to `recvfrom'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(ares_process.o): In function `setsocknonblock':
/home/azureuser/grpc/third_party/cares/cares/ares_process.c:911: undefined reference to `fcntl'
/home/azureuser/grpc/third_party/cares/cares/ares_process.c:913: undefined reference to `fcntl'
/home/azureuser/grpc/libs/opt/libgrpc_unsecure.a(ares_process.o): In function `configure_socket':
/home/azureuser/grpc/third_party/cares/cares/ares_process.c:966: undefined reference to `fcntl'
clang: error: linker command failed with exit code 1 (use -v to see invocation)
Makefile:29: recipe for target 'build' failed
make[2]: *** [build] Error 1
make[2]: Leaving directory '/home/azureuser/openenclave-install/share/openenclave/samples/hello-world-grpc/enc'
Makefile:24: recipe for target 'all' failed
make[1]: *** [all] Error 2
make[1]: Leaving directory '/home/azureuser/openenclave-install/share/openenclave/samples/hello-world-grpc/enc'
Makefile:5: recipe for target 'build' failed
make: *** [build] Error 2
